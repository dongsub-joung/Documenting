---
title: Mecro function
tag: cpp
---



## Preprocess - #define

 간단한 계산식 등은 변수 마찬가지로 컴파일시에 전개해 버리는 수법이 적용된다.

 즉, 전처리를 사용한다. #define은 토큰 열에 이름을 붙여서 컴파일시에 전처리에 의해 이것이 대체하는 것이었다. 

상수가 아닌 계산식에 이름을 붙여 소스 내에 필요한 곳에 사용하고, 컴파일시에 대체하여 효율적으로 빠른 프로그램을 만들 수 있다.

\#define는 매크로 함수라고 하는 인수를 받을 수 있는 대체 처리를 지원하고 있다. 

이것은 이용자로부터 보면 함수와 같은 동작을 한다. 



### #define 지시문 (매크로 함수)

```
#define 식별자(인수1, 인수2 ...) 토큰열
```

```
#define ADD(a , b) a + b
```

이것은 ADD() 매크로 함수를 정의하고 있다. ADD(10, 20)과 소스 내에 작성하면, 그 위치에 전처리가 10 + 20이라는 텍스트로 바꾼다.

> 매크로 함수의 개발자는 함수가 호출되는 것이 아니라, 단순히 그 위치에 토큰 열이 전개될 뿐임을 의식하지 않으면 안된다.

- 매크로 함수의 인수에는 반드시 ()를 지정하여 우선 순위를 보호하는 방법이 있다.

 MUL() 함수는 다음과 같이 정의한다.

```
#define MUL(multiplicand , multiplier) ((multiplicand) * (multiplier))
```

-  매크로 함수가 위력을 발휘하는 것은 복잡한 수식을 단순화하는 경우이다. 

행정 절차와 세제가 복잡하다면 주민이 기피하듯이, 당신이 만든 시스템의 사양이 아무리 효율적이라도, 계산 처리 등에 시간이 걸린다면 개발자는 시스템 서비스를 사용하고 싶은 생각하지 들지 않을 것이다.

이 외에도 함수 호출을 은폐하는 매크로 함수(매크로 함수에서 함수를 호출하여 절차를 간소화하기) 등의 이용도 된다. 

이처럼 매크로 함수는 계산만으로 구성되는 비교적 간단한 변환 처리 등에 많이 사용된다.

> enum 은 복잡한 변수들 case문들을 가독성 좋게 만든 것이라고 한다면, define은 복잡한 수식을 가독성있게 정리한 것이라고 말할 수 있다.

[프로그램 개발 지식 공유: 매크로 함수](https://araikuma.tistory.com/585)

---



